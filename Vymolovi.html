<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Výmolovi</title>

    <link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/resp.css">
    
    <style>
    /* Import fontu EB Garamond */
    @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap');

        .page-wrapper {
            width: 100%;
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            box-sizing: border-box; 
            text-align: center; 
        }

        .page-wrapper h1 {
            font-family: "Dancing Script";
            font-size: 32px;
            color: #5C4033; 
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .page-wrapper .instructions {
            font-size: 16px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .chart-container {
            width: 100%;
            max-width: 1200px;
        }

        svg {
            width: 100%;
            height: auto;
            font-size: 10px;
        }

        /* ----- Styly pro buňky rodokmenu ----- */
        .ancestor-cell {
            fill: #ffffff;
            stroke: #a8763e;
            stroke-width: 1;
            transition: fill 0.2s ease-in-out;
        }
        
        .ancestor-group {
             cursor: pointer;
        }

        .ancestor-group:hover .ancestor-cell {
            fill: #704d29;
        }

        .ancestor-text {
            fill: #5d4222;
            /* text-anchor se nyní nastavuje v JS */
            dominant-baseline: middle;
            pointer-events: none;
            font-size: 20px;
            font-weight: 500;
        }
   
        /* Barevné odlišení generací *//* https://www.w3schools.com/colors/colors_picker.asp */
        .gen-1 .ancestor-cell { fill: #f2e6d9; }
        .gen-2 .ancestor-cell { fill: #ebd9c6; }
        .gen-3 .ancestor-cell { fill: #e4cdb4; }
        .gen-4 .ancestor-cell { fill: #ddc0a1; }
        .gen-5 .ancestor-cell { fill: #d6b48f; }
        .gen-6 .ancestor-cell { fill: #cfa77d; }
        
        .ancestor-group:hover .ancestor-cell {
            fill: #815931;
        }
        .ancestor-group:hover .ancestor-text {
            fill: white;
            font-weight: bold;
        }
        
        /* ----- Styly pro modální okno (beze změny) ----- */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); 
        }

        .modal.active {
            display: flex; 
        }

        .modal-content {
            background-color: #f8f2ec;
            margin: auto;
            padding: 25px;
            border: 1px solid #956637;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal-close {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        .modal-content h2 {
            margin-top: 0;
            color: #5C4033;
			text-align: left;
        }
        
        .modal-content p {
            font-size: 20px;
            display: none; 
			text-align: left;
        }
        
        .modal-content p strong {
            display: inline-block;
            min-width: 80px; 
            color: #555;
        }
        
        .modal-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; 
            gap: 10px; 
        }
        
        .modal-button {
            display: inline-block; 
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            color: #fff;
            background-color: #815931; 
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .modal-button:hover {
            background-color: #cfa77d; 
        }
        
        .modal-button.disabled {
            background-color: #ccc;
            cursor: not-allowed;
            pointer-events: none;
        }

    </style>
</head>
<body>

	<header>
		<div class="container">
           <div class="ribbon">
              <div class="ribbon-content">
                 Rodokmeny od Karolíny
             </div>
           </div>
		</div>
	</header>

	<main>
    <div class="page-wrapper">
        <h1>Předkové rodu Výmolových </h1>
        <p class="instructions">Kliknutím na pole se jménem zobrazíte detailní informace o osobě.</p>

        <div class="chart-container">
            <svg id="fan-chart" viewBox="0 0 1000 520"></svg>
        </div>
	</div>
		
		<div>
		   <p><a href="index.html">Zpět na rozcestník rodů </a></p>
		</div>

		<div id="person-modal" class="modal">
    <div class="modal-content">
            <span id="modal-close-btn" class="modal-close">&times;</span>
            
            <h2 id="modal-name">Jméno osoby</h2>
            
            <p id="modal-row-birth"><strong class.text-gray-500>Narození:</strong> <span id="modal-birth"></span></p>
            <p id="modal-row-marriage"><strong class.text-gray-500>Sňatek:</strong> <span id="modal-marriage"></span></p>
            <p id="modal-row-death"><strong class.text-gray-500>Úmrtí:</strong> <span id="modal-death"></span></p>
            <p id="modal-row-cause"><strong class.text-gray-500>Příčina úmrtí:</strong> <span id="modal-cause"></span></p>
            <p id="modal-row-occupation"><strong class.text-gray-500>Povolání:</strong> <span id="modal-occupation"></span></p>
            <p id="modal-row-note"><strong class.text-gray-500>Poznámka:</strong> <span id="modal-note"></span></p>

            <div class="modal-buttons">
                <a id="modal-link-birth" href="#" target="_blank" class="modal-button">Matrika narození</a>
                <a id="modal-link-marriage" href="#" target="_blank" class="modal-button">Matrika sňatků</a>
                <a id="modal-link-death" href="#" target="_blank" class="modal-button">Matrika úmrtí</a>
            </div>
        </div>
		</div>
	</main>
	<footer>Vytvořila Karolína </footer>

	
    
    

    <script>
        (function() {
            // --- Nastavení ---
            const generations = 6;
            const centerX = 500; 
            const centerY = 20;  
            const radii = [0, 80, 160, 240, 320, 400, 480]; 
            const svg = document.getElementById('fan-chart');

            // --- Vzorová DATA (beze změny) ---
            const ancestorData = {
                '1_0': {
                    name: 'Zdeněk Výmola',
                    birth: '15. 2. 1943, Čejč',
                    death: '16. 4. 2024, Zlín', 
                    cause: null, 
                    occupation: '',
                    marriage: null, 
                    linkBirth: '',
                    linkMarriage: null, 
                    linkDeath: null     
                },

				'2_0': {
name: 'Bohumil Výmola',
                    birth: '19. 8. 1899, Bohuslavice 208 (u Kyjova)',
                    death: '29. 12. 1975, Čejč', 
                    cause: null, 
                    occupation: 'Železniční zřizenec v Čejči (1922)',
                    marriage: '10. 4. 1922, Hovorany', 
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/10463?image=216000010-000253-003372-000000-005350-000000-00-B01573-00670.jp2', 
                    linkDeath: null,
note: 'Ještě na počátku 20. století nebyla ustálena forma příjmení a v matričních zapisech se objevuje "Vejmola"'
}, 

'2_1': {
        name: 'Anna Pekárková',
                    birth: '7. 2. 1898, Čejč 54',
                    death: '5. 3. 1979, Čejč', 
                    cause: null, 
                    occupation: '',
                    marriage: '10. 4. 1922, Hovorany', 
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/10463?image=216000010-000253-003372-000000-005350-000000-00-B01573-00670.jp2', 
                    linkDeath: null   
},

     '3_0': {
                    name: 'Marie Seloucká',
                    birth: '4. 1. 1870, Bohuslavice 96',
                    death: '2. 8. 1931, Bohuslavice 203',
                    cause: 'rakovina žaludku',
                    occupation: '',
                    marriage: '19. 11. 1889, Bohuslavice u Kyjova',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4908?image=216000010-000253-003372-000000-005138-000000-00-B06947-00260.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-01280.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-02380.jp2',
                    note: 'Zapisována i jako Selucká'
                }, 

'3_1': {
                    name: 'Josef Výmola',
                    birth: '11. 8. 1862, Bohuslavice 203',
                    death: '10. 9. 1933, Bohuslavice 203',
                    cause: 'rakovina žaludku',
                    occupation: 'domkář',
                    marriage: '19. 11. 1889, Bohuslavice u Kyjova',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4907?image=216000010-000253-003372-000000-005137-000000-FM-B10019-01380.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-01280.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-02410.jp2',
                    note: 'Zapisován jako Vejmola'
                },

'3_2': {
                    name: 'Jan Pekárek',
                    birth: '3. 6. 1857, Šardice 184',
                    death: '29. 7. 1905, Čejč 54',
                    cause: 'sebevražda, oběsil se v opilosti',
                    occupation: 'nádeník (1898)',
                    marriage: '15. 6. 1884, Hovorany',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5258?image=216000010-000253-003372-000000-005868-000000-00-B06665-01270.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/10463?image=216000010-000253-003372-000000-005350-000000-00-B01573-01090.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12444?image=216000010-000253-003372-000000-005354-000000-00-00380.jp2'
                },

'3_3': {
                    name: 'Magdalena Tichá',
                    birth: '8. 1. 1863, Niederleithen, Kallham - Dolní Rakousko',
                    death: '28. 9. 1942, Čejč 219',
                    cause: 'degenerace srdeční tkáně (mydegeneratio cordis)',
                    occupation: 'uklízečka na nádraží v Čejči (1942)',
                    marriage: '15. 6. 1884, Hovorany',
                    linkBirth: 'https://data.matricula-online.eu/en/oesterreich/oberoesterreich/kallham/106%252F1863/?pg=1',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/10463?image=216000010-000253-003372-000000-005350-000000-00-B01573-01090.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12444?image=216000010-000253-003372-000000-005354-000000-00-00720.jp2',
                    note: 'Najít narození byl opravdu oříšek, ale nakonec pomohl údaj ve Sčítání lidu. Ještě před sňatkem se jí narodila dcera Marie (1882).'
                },

'4_0' : {
                    name: 'Františka Houšťová',
                    birth: '28. 1. 1846, Bohuslavice 178',
                    death: '9. 7. 1910, Bohuslavice 96',
                    cause: 'rakovina pobřišnice',
                    occupation: '',
                    marriage: '30. 5. 1865, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4907?image=216000010-000253-003372-000000-005137-000000-FM-B10019-00540.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00860.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01810.jp2',
                    note:''
},

'4_1' : {
                    name: 'Josef Seloucký',
                    birth: '9. 9. 1836, Bohuslavice 176',
                    death: '6. 9. 1910, Bohuslavice 96',
                    cause: 'rakovina žaludku',
                    occupation: 'domkář',
                    marriage: '30. 5. 1865, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4907?image=216000010-000253-003372-000000-005137-000000-FM-B10019-00100.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00860.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01810.jp2',
                    note:''
},

'4_2' : {
                    name: 'Rosalie Slámová',
                    birth: '11. 3. 1830, Bohuslavice 41',
                    death: '7. 2. 1913, Bohuslavice 156',
                    cause: 'rakovina žaludku',
                    occupation: '',
                    marriage: '8. 5. 1853, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-01660.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00550.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01850.jp2',
                    note:''
},

'4_3' : {
          name: 'Antonín Výmola',
                    birth: '1. 7. 1831, Bohuslavice 19',
                    death: '1. 4. 1897, Bohuslavice 203',
                    cause: 'rakovina žaludku',
                    occupation: 'domkář',
                    marriage: '8. 5. 1853, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-01710.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00550.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01410.jp2',
                    note:''

},

'4_4': {
                    name: 'František Pekárek',
                    birth: '23. 9. 1816, Mistřín 14',
                    death: '12. 6. 1882, Šardice 152',
                    cause: 'souchotiny (tuberkulóza)',
                    occupation: 'čtvrtláník',
                    marriage: '5. 2. 1839, Šardice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5143?image=216000010-000253-003372-000000-005648-000000-00-B08587-00280.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5261?image=216000010-000253-003372-000000-005876-000000-00-B06668-00820.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5265?image=216000010-000253-003372-000000-005882-000000-00-B06671-00730.jp2',
                    note: 'Po smrti manželky Kateřiny se znovu oženil s Annou Ševelovou, 27. února 1870 v Šardicích'
                },

   '4_5': {
                    name: 'Kateřina Milotová',
                    birth: '29. 4. 1816, Dolní Bojanovice 157/120',
                    death: '10. 8. 1866, Šardice 70',
                    cause: 'cholera',
                    occupation: '',
                    marriage: '5. 2. 1839, Šardice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4949?image=216000010-000253-003372-000000-005223-000000-00-B06951-00020.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5261?image=216000010-000253-003372-000000-005876-000000-00-B06668-00820.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5265?image=216000010-000253-003372-000000-005882-000000-00-B06671-00390.jp2',
                    note: ''
                },

'4_6': {
                    name: 'Vincenc Tichý',
                    birth: '',
                    death: '19. 1. 1863, Niederleithen 7, Kallham, Horní Rakousko',
                    cause: 'ochrnutí plic',
                    occupation: 'dělník na železnici',
                    marriage: '13. 11. 1855, Čejč',
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5005?image=216000010-000253-003372-000000-005344-000000-00-B05576-02020.jp2',
                    linkDeath: 'https://data.matricula-online.eu/en/oesterreich/oberoesterreich/kallham/306%252F1863/?pg=1',
                    note: 'Jeden zápis uvádí, že byl také havíř, což může být pravda, neboť v okolí Kyjova a Hodonína se v té době těžilo hnědé uhlí.'
                },

'4_7': {
                    name: 'Eva Petty(ová)',
                    birth: '24. 12. 1830, Krumvíř 54',
                    death: '15. 6. 1920, Čejč 144',
                    cause: 'sešlost věkem',
                    occupation: 'nádenice',
                    marriage: '13. 11. 1855, Čejč',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/1747?image=216000010-000253-003370-000000-002808-000000-FM-B09326-00300.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5005?image=216000010-000253-003372-000000-005344-000000-00-B05576-02020.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12444?image=216000010-000253-003372-000000-005354-000000-00-00500.jp2',
                    note: 'Z údajů o sčítání lidu lze vyčíst, že po smrti jejího manžela žila se svými dětmi v jedné domácnosti společně se svým bratrem Jakubem Ročným. Ten se narodil jako nemanželský, proto má jiné příjmení a možná i proto bývá Eva v některých zápisech uváděna také jako Ročná.'
                },

				'5_0': {
                    name: 'Františka Šafaříková',
                    birth: '17. 7. 1817, Bohuslavice 178',
                    death: '22. 12. 1848, Bohuslavice 178',
                    cause: 'gangréna s horečkou (heissen Brand)',
                    occupation: '',
                    marriage: '6. 2. 1842, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-01300.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00100.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00260.jp2',
                    note: ''
                },

'5_1': {
                    name: 'Jan Houšť',
                    birth: '12. 11. 1816, Bohuslavice 29',
                    death: '11. 4. 1899, Bohuslavice 78',
                    cause: 'zápal plic',
                    occupation: 'domkář',
                    marriage: '6. 2. 1842, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-01290.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/9911?image=216000010-000253-003372-000000-005141-000000-00-B02380-00100.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01500.jp2',
                    note: 'Po smrti manželky Františky se roku 1850 oženil s Josefou Šafaříkovou.'
                },

'5_2': {
                    name: 'Marie Anna Spurná',
                    birth: '20. 12. 1798, Bohuslavice 17',
                    death: '',
                    cause: '',
                    occupation: '',
                    marriage: '2. 2. 1830, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00730.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00700.jp2',
                    linkDeath: '',
                    note: 'vdova po Antonínu Stokláskovi'
                },

'5_3': {
                    name: 'Josef Seloucký',
                    birth: '4. 3. 1808, Věteřov 90',
                    death: '',
                    cause: '',
                    occupation: '',
                    marriage: '2. 2. 1830, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5354?image=216000010-000253-003372-000000-005947-000000-00-B06764-00990.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00700.jp2',
                    linkDeath: '',
                    note: ''
                },

				'5_4': {
                    name: 'Magdalena Kišová',
                    birth: '6. 7. 1791, Bohuslavice 107',
                    death: '24. 3. 1845, Bohuslavice 203',
                    cause: 'zápal plic',
                    occupation: '',
                    marriage: '3. 2. 1824, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00490.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00570.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00170.jp2',
                    note: ''
                },
'5_5': {
                    name: 'František Sláma',
                    birth: '30. 7. 1803, Bohuslavice 41',
                    death: '',
                    cause: '',
                    occupation: 'švec a domkář',
                    marriage: '3. 2. 1824, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00860.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00570.jp2',
                    linkDeath: '',
                    note: ''
                },
'5_6':{
                    name: 'Anna Štěpánková',
                    birth: '17. 11. 1806, Bohuslavice 152',
                    death: '23. 1. 1887, Bohuslavice 105',
                    cause: 'vysílení',
                    occupation: '',
                    marriage: '7. 11. 1826, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00930.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00620.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-01000.jp2',
                    note: ''
                },
'5_7':{
                    name: 'Tomáš Výmola',
                    birth: '19. 9. 1802, Bohuslavice 32',
                    death: '1. 7. 1866, Bohuslavice 60',
                    cause: '',
                    occupation: 'domkář',
                    marriage: '7. 11. 1826, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00830.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00620.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00770.jp2',
                    note: ''
                },

				'5_8': {
                    name: 'Martin Pekárek',
                    birth: '7. 6. 1772, Mistřín 18',
                    death: '6. 10. 1831, Mistřín 14',
                    cause: 'cholera',
                    occupation: 'domkář',
                    marriage: '19. 1. 1796, Mistřín',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5136?image=216000010-000253-003372-000000-005631-000000-00-B07982-00400.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5146?image=216000010-000253-003372-000000-005655-000000-00-B08590-00060.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5149?image=216000010-000253-003372-000000-005662-000000-00-B08593-00250.jp2',
                    note: ''
                },

'5_9': {
                    name: 'Veronika Buštíková',
                    birth: '18. 4. 1777, Mistřín 14',
                    death: '11. 4. 1843, Mistřín 14',
                    cause: 'zápal plic',
                    occupation: '',
                    marriage: '19. 1. 1796, Mistřín',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5136?image=216000010-000253-003372-000000-005631-000000-00-B07982-00550.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5146?image=216000010-000253-003372-000000-005655-000000-00-B08590-00060.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5149?image=216000010-000253-003372-000000-005662-000000-00-B08593-00380.jp2',
                    note: ''
                },

'5_10': {
                    name: 'Josef Milota',
                    birth: 'okolo 1780',
                    death: '28. 4. 1848, Šardice 164/6',
                    cause: 'zánět střev ',
                    occupation: 'domkář',
                    marriage: '12. 8. 1816, Dolní Bojanovice',
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5264?image=216000010-000253-003372-000000-005881-000000-00-B06670-00850.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5264?image=216000010-000253-003372-000000-005881-000000-00-B06670-00850.jp2',
                    note: ''
                }, 

'5_11': {
                    name: 'Magdalena Dřímalíková',
                    birth: '6. 7. 1789, Josefov 39',
                    death: '7. 2. 1851, Šardice 184',
                    cause: 'sešlost věkem',
                    occupation: '',
                    marriage: '',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/10380?image=216000010-000253-003372-000000-opis12-000000-00-B00613-00310.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5264?image=216000010-000253-003372-000000-005881-000000-00-B06670-00850.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5264?image=216000010-000253-003372-000000-005881-000000-00-B06670-00940.jp2',
                    note: 'Vdova po Josefu Kučerovi'
                },

'5_12': {
                    name: 'Václav Tichý',
                    birth: '',
                    death: '',
                    cause: '',
                    occupation: 'podruh',
                    marriage: '',
                    linkBirth: '',
                    linkMarriage: '',
                    linkDeath: '',
                    note: 'O této osobě se zatím nepovedlo nic zjistit.'
                },

'5_13': {
                    name: 'Kateřina Kohoutová',
                    birth: '',
                    death: '19. 9. 1855, Čejč 36',
                    cause: 'cholera',
                    occupation: '',
                    marriage: '',
                    linkBirth: '',
                    linkMarriage: '',
                    linkDeath: '',
                    note: 'O této osobě se zatím nepovedlo zjistit, odkud pocházela nebo kdy a kde se vdala. V zápisu sňatku jejího syna je uvedeno místo Lednice v Čechách.'
                },

'5_14': {
                    name: 'Jan Petty',
                    birth: '27. 7. 1803, Čejč 38',
                    death: '18. 8. 1855, Čejč 36',
                    cause: 'cholera',
                    occupation: 'podruh',
                    marriage: '9. 11. 1828, Klobouky (u Brna)',
                    linkBirth: https://www.mza.cz/actapublica/matrika/detail/5005?image=216000010-000253-003372-000000-005344-000000-00-B05576-00180.jp2'',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/2754?image=216000010-000253-003370-000000-002753-000000-00-B08780-00290.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5005?image=216000010-000253-003372-000000-005344-000000-00-B05576-02820.jp2',
                    note: ''
                },

'5_15': {
                    name: 'Josefa Ročná',
                    birth: '10. 4. 1805, Klobouky 29',
                    death: '11. 1. 1834, Krumvíř 51',
                    cause: 'vodnatelnost',
                    occupation: '',
                    marriage: '9. 11. 1828, Klobouky (u Brna)',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/2742?image=216000010-000253-003370-000000-002732-000000-00-B08778-00080.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/2754?image=216000010-000253-003370-000000-002753-000000-00-B08780-00290.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/1617?image=216000010-000253-003370-000000-002817-000000-00-B01706-00220.jp2',
                    note: ''
                },



				'6_0': {
                    name: 'Rozálie Výmolová',
                    birth: '30. 8. 1787, Bohuslavice 80',
                    death: '9. 1. 1872, Bohuslavice 178',
                    cause: 'vysílení',
                    occupation: '',
                    marriage: '7. 6. 1813, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00360.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00470.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00910.jp2',
                    note: 'Starší sestra Tomáše Výmoly (*1802)'
                },
'6_1': {
                    name: 'Jan Šafařík',
                    birth: '7. 5. 1786, Bohuslavice 15',
                    death: '23. 11. 1864, Bohuslavice 34',
                    cause: 'stařecká slabost',
                    occupation: 'mistr kolářský',
                    marriage: '7. 6. 1813, Bo',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00320.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00470.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00750.jp2',
                    note: ''
                },

'6_2': {
                    name: 'Rozálie Růžičková',
                    birth: '25. 2. 1789, Vlkoš 79',
                    death: '20. 3. 1847, Bohuslavice 87',
                    cause: 'Vodnatelnost',
                    occupation: '',
                    marriage: '21. 2. 1816, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5357?image=216000010-000253-003372-000000-005961-000000-00-B02601-00340.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00490.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00220.jp2',
                    note: ''
                },
'6_3': {
                    name: 'Jakub Houšť',
                    birth: '22. 7. 1792, Bohuslavice 59',
                    death: '24. 11. 1831, Bohuslavice 78',
                    cause: 'cholera',
                    occupation: 'domkář',
                    marriage: '21. 2. 1816, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00530.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00490.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-01380.jp2',
                    note: ''
                },

'6_4': {
                    name: 'Apolena Nováková',
                    birth: '22. 3. 1766, Nechvalín',
                    death: '4. 1. 1829, Bohuslavice 17',
                    cause: 'gangréna',
                    occupation: '',
                    marriage: '16. 3. 1786, Nechvalín',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5109?image=216000010-000253-003372-000000-005571-000000-00-B05588-00990.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5114?image=216000010-000253-003372-000000-005580-000000-00-B05591-00070.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-01290.jp2',
                    note: ''
                },

'6_5': {
                    name: 'Ondřej Spurný',
                    birth: '',
                    death: '26. 2. 1827, Bohuslavice 17',
                    cause: 'nervová horečka',
                    occupation: 'podsedník',
                    marriage: '16. 3. 1786, Nechvalín',
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5114?image=216000010-000253-003372-000000-005580-000000-00-B05591-00070.jp2',
                    linkDeath: '',
                    note: ''
                },
'6_6': {
                    name: 'Mariana Chromá',
                    birth: '1. 7. 1768, Věteřov ',
                    death: '',
                    cause: '',
                    occupation: '',
                    marriage: '7. 2. 1792, Věteřov',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5109?image=216000010-000253-003372-000000-005571-000000-00-B05588-01080.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5354?image=216000010-000253-003372-000000-005947-000000-00-B06764-00020.jp2',
                    linkDeath: '',
                    note: ''
                },
'6_7': {
                    name: 'Matěj Seloucký',
                    birth: 'Bukovany',
                    death: '26. 9. 1819, Věteřov 90',
                    cause: 'zánět střev (darmbrand)',
                    occupation: 'čtvrtláník',
                    marriage: '7. 2. 1792, Věteřov',
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/5354?image=216000010-000253-003372-000000-005947-000000-00-B06764-00020.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/5354?image=216000010-000253-003372-000000-005947-000000-00-B06764-02450.jp2',
                    note: ''
                },

			'6_8': {
                    name: 'Anna Nováková',
                    birth: 'okolo 1766',
                    death: '',
                    cause: '',
                    occupation: '',
                    marriage: '13. 9. 1786, Bohuslavice',
                    linkBirth: '',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00170.jp2',
                    linkDeath: '',
                    note: ''
                },

'6_9': {
                    name: 'Jan Kiša',
                    birth: '3. 6. 1759, Bohuslavice',
                    death: '27. 11. 1831, Bohuslavice 104',
                    cause: 'cholera',
                    occupation: 'nádeník',
                    marriage: '13. 9. 1786, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5045?image=216000010-000253-003372-000000-005439-000000-00-B03242-02870.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00170.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-01380.jp2',
                    note: 'Dne 12. 10. 1795 zakoupil dům č. 104 v Bohuslavice.'
                },

'6_10': {
                    name: 'Eva Cichrová',
                    birth: '19. 2. 1774, Bohuslavice 41',
                    death: '4. 2. 1833, Bohuslavice 41',
                    cause: 'sešlost věkem',
                    occupation: '',
                    marriage: '8. 2. 1792, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00060.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00220.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-01430.jp2',
                    note: ''
                },

'6_11': {
                    name: 'Václav Sláma',
                    birth: '26. 9. 1762, Švábenice',
                    death: '26. 10. 1810, Bohuslavice 41',
                    cause: '',
                    occupation: 'švec',
                    marriage: '8. 2. 1792, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/2607?image=216000010-000253-003378-000000-013215-000000-FM-B11127-00050.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00220.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-00900.jp2',
                    note: ''
                },

'6_12': {
                    name: 'Tereza Severínová',
                    birth: '13. 6. 1781, Bohuslavice 113',
                    death: '',
                    cause: '',
                    occupation: '',
                    marriage: '3. 2. 1802, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00200.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00330.jp2',
                    linkDeath: '',
                    note: ''
                },

'6_13': {
                    name: 'Ondřej Štěpánek',
                    birth: '30. 11. 1776, Bohuslavice 118',
                    death: '',
                    cause: '',
                    occupation: 'domkář',
                    marriage: '3. 2. 1802, Bohuslavice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/4906?image=216000010-000253-003372-000000-005136-000000-00-B06793-00110.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/4909?image=216000010-000253-003372-000000-005140-000000-FM-B10020-00330.jp2',
                    linkDeath: '',
                    note: ''
                },
'6_14': {
                    name: 'Apolena Panáčová',
                    birth: '23. 11. 1763, Jestřabice',
                    death: '16. 1. 1847, Bohuslavice 45',
                    cause: 'sešlost věkem',
                    occupation: '',
                    marriage: '1. 2. 1785, Jestřabice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/8856?image=216000010-000253-003374-000000-007824-000000-00-B06186-00060.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/8862?image=216000010-000253-003374-000000-007835-000000-00-B02880-00210.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/12786?image=216000010-000253-003372-000000-005144-000000-00-00210.jp2',
                    note: ''
                },

'6_15': {
                    name: 'Valentýn Výmola',
                    birth: '14. 2. 1763, Bohuslavice',
                    death: '9. 1. 1830, Bohuslavice 45',
                    cause: 'zápal plic „píchání v boku“',
                    occupation: 'domkář',
                    marriage: '1. 2. 1785, Jestřabice',
                    linkBirth: 'https://www.mza.cz/actapublica/matrika/detail/5046?image=216000010-000253-003372-000000-005440-000000-00-B07066-00110.jp2',
                    linkMarriage: 'https://www.mza.cz/actapublica/matrika/detail/8862?image=216000010-000253-003374-000000-007835-000000-00-B02880-00210.jp2',
                    linkDeath: 'https://www.mza.cz/actapublica/matrika/detail/4910?image=216000010-000253-003372-000000-005143-000000-FM-B10021-01310.jp2',
                    note: ''
                }
	

            
            
            };
            
            // Popisky (jména) pro buňky
            const labels = {};
            for (const key in ancestorData) {
                if(ancestorData[key]) labels[key] = ancestorData[key].name;
            }
            
            // --- Reference na modální okno a jeho prvky (beze změny) ---
            const modal = document.getElementById('person-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalName = document.getElementById('modal-name');
            
            const modalBirth = document.getElementById('modal-birth');
            const modalMarriage = document.getElementById('modal-marriage');
            const modalDeath = document.getElementById('modal-death');
            const modalCause = document.getElementById('modal-cause');
            const modalOccupation = document.getElementById('modal-occupation');
            const modalNote = document.getElementById('modal-note');
            
            const modalLinkBirth = document.getElementById('modal-link-birth');
            const modalLinkMarriage = document.getElementById('modal-link-marriage');
            const modalLinkDeath = document.getElementById('modal-link-death');

            // --- Formátování data do češtiny (beze změny) ---
            const czechMonths = [
                'ledna', 'února', 'března', 'dubna', 'května', 'června',
                'července', 'srpna', 'září', 'října', 'listopadu', 'prosince'
            ];

            function formatCzechDate(dateString) {
                if (!dateString) {
                    return null;
                }
                const match = dateString.match(/^(\d{1,2})\. *(\d{1,2})\. *(\d{4})(.*)$/);

                if (match) {
                    const day = match[1];
                    const monthIndex = parseInt(match[2], 10) - 1; 
                    const year = match[3];
                    const rest = match[4]; 

                    if (monthIndex >= 0 && monthIndex < 12) {
                        const monthName = czechMonths[monthIndex];
                        return `${day}. ${monthName} ${year}${rest}`;
                    }
                }
                return dateString;
            }

            // --- Funkce modálního okna (beze změny) ---
            function updateModalRow(spanElement, value) {
                const rowElement = spanElement.parentElement; 
                if (value) {
                    spanElement.textContent = value;
                    rowElement.style.display = 'block'; 
                } else {
                    spanElement.textContent = ''; 
                    rowElement.style.display = 'none';  
                }
            }

            function closeModal() {
                modal.classList.remove('active');
            }
            modalCloseBtn.onclick = closeModal;
            modal.onclick = function(event) {
                if (event.target == modal) {
                    closeModal();
                }
            }
            
            function showModal(key) {
                const data = ancestorData[key];
                
                if (data) {
                    modalName.textContent = data.name;
                    updateModalRow(modalBirth, formatCzechDate(data.birth));
                    updateModalRow(modalMarriage, formatCzechDate(data.marriage));
                    updateModalRow(modalDeath, formatCzechDate(data.death));
                    updateModalRow(modalCause, data.cause);
                    updateModalRow(modalOccupation, data.occupation);
                    updateModalRow(modalNote, data.note); 
                    
                    setButtonLink(modalLinkBirth, data.linkBirth);
                    setButtonLink(modalLinkMarriage, data.linkMarriage);
                    setButtonLink(modalLinkDeath, data.linkDeath);

                } else {
                    modalName.textContent = `Předek (Gen ${key.split('_')[0]}, Index ${key.split('_')[1]})`;
                    updateModalRow(modalBirth, null);
                    updateModalRow(modalMarriage, null);
                    updateModalRow(modalDeath, null);
                    updateModalRow(modalCause, null);
                    updateModalRow(modalOccupation, null);
                    updateModalRow(modalNote, null);
                    
                    setButtonLink(modalLinkBirth, null);
                    setButtonLink(modalLinkMarriage, null);
                    setButtonLink(modalLinkDeath, null);
                }
                
                modal.classList.add('active'); 
            }
            
            function setButtonLink(button, href) {
                if (href && href !== '#') {
                    button.href = href;
                    button.classList.remove('disabled');
                    button.removeAttribute('aria-disabled');
                    button.style.display = 'inline-block'; 
                } else {
                    button.href = '#'; 
                    button.classList.add('disabled');
                    button.setAttribute('aria-disabled', 'true');
                    button.style.display = 'none'; 
                }
            }

            // --- Helper funkce (beze změny) ---
            function polarToCartesian(cx, cy, radius, angleInDegrees) {
                const angleInRadians = (angleInDegrees) * Math.PI / 180.0;
                return {
                    x: cx + (radius * Math.cos(angleInRadians)),
                    y: cy + (radius * Math.sin(angleInRadians))
                };
            }

            function describeArcSector(x, y, innerRadius, outerRadius, startAngle, endAngle) {
                const startOuter = polarToCartesian(x, y, outerRadius, endAngle);
                const endOuter = polarToCartesian(x, y, outerRadius, startAngle);
                const startInner = polarToCartesian(x, y, innerRadius, endAngle);
                const endInner = polarToCartesian(x, y, innerRadius, startAngle);
                const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
                const d = [
                    "M", startOuter.x, startOuter.y, 
                    "A", outerRadius, outerRadius, 0, largeArcFlag, 0, endOuter.x, endOuter.y,
                    "L", endInner.x, endInner.y,     
                    "A", innerRadius, innerRadius, 0, largeArcFlag, 1, startInner.x, startInner.y,
                    "Z"
                ].join(" ");
                return d;
            }

            
                
                            // --- AKTUALIZOVANÁ FUNKCE PRO TŘÍŘÁDKOVÉ ZALAMOVÁNÍ ---
            function createTextLabel(text, gen, midAngle, midRadius) {
                const textPos = polarToCartesian(centerX, centerY, midRadius, midAngle); 
                
                const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textEl.setAttribute("x", textPos.x);
                textEl.setAttribute("y", textPos.y);

                // Otáčení textu (logika zůstává beze změny)
                let textAngle = midAngle - 90; 
                if (gen === 1) {
                    textAngle = 0;
                }
                
                textEl.setAttribute("transform", `rotate(${textAngle}, ${textPos.x}, ${textPos.y})`);
                textEl.style.textAnchor = "middle"; 

                textEl.classList.add("ancestor-text");
                
                // Zmenšení písma pro vnější generace (zachováno)
                if (gen > 4) textEl.style.fontSize = "12px";
                if (gen > 5) textEl.style.fontSize = "10px";
                
                // --- NOVÁ LOGIKA TŘÍ ŘÁDKŮ ---
                const parts = text.split(/\s+/); 
                
                if (parts.length >= 3) {
                    const line1 = parts[0];             // První jméno
                    const line2 = parts[1];             // Druhé jméno
                    const line3 = parts.slice(2).join(' '); // Zbytek (Příjmení/Více příjmení)
                    
                    // --- 1. ŘÁDEK (NEJVÝŠE) ---
                    const tspan1 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspan1.textContent = line1;
                    // Posun nahoru o 1 řádek, aby byl text centrován symetricky
                    tspan1.setAttribute('dy', '-1em'); 
                    tspan1.setAttribute('x', textPos.x);
                    textEl.appendChild(tspan1);

                    // --- 2. ŘÁDEK (STŘED) ---
                    const tspan2 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspan2.textContent = line2;
                    // Posun dolů o 1 řádek od předchozího, čímž se vrací do středu
                    tspan2.setAttribute('dy', '1em'); 
                    tspan2.setAttribute('x', textPos.x); 
                    textEl.appendChild(tspan2);
                    
                    // --- 3. ŘÁDEK (NEJSPODNĚJI) ---
                    const tspan3 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspan3.textContent = line3;
                    // Posun dolů o 1 řádek od předchozího
                    tspan3.setAttribute('dy', '1em'); 
                    tspan3.setAttribute('x', textPos.x); 
                    textEl.appendChild(tspan3);

                } else {
                    // Původní logika pro 1 nebo 2 slova (zachování 2 řádků, nebo bez zalamování)
                    
                    if (parts.length === 2) {
                        const line1 = parts[0];
                        const line2 = parts[1];
                        
                        // Nová (více symetrické centrování):
                        const tspan1 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                        tspan1.textContent = line1;
                        // Posun nahoru o 0.5 řádku (centrováno uprostřed dvou řádků)
                        tspan1.setAttribute('dy', '-0.5em'); 
                        tspan1.setAttribute('x', textPos.x);
                        textEl.appendChild(tspan1);

                        const tspan2 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                        tspan2.textContent = line2;
                        tspan2.setAttribute('x', textPos.x); 
                        // Posun dolů o 1 řádek od předchozího (-0.5 + 1.0 = +0.5, stále centrováno)
                        tspan2.setAttribute('dy', '1em'); 
                        textEl.appendChild(tspan2);
                    } else {
                        // Jen jedno slovo, nezalamujeme
                         textEl.textContent = text;
                    }
                }

                return textEl;
        }
                


            // --- Hlavní smyčka pro generování (beze změny) ---
            const totalAngle = 180; 
            for (let gen = 1; gen <= generations; gen++) {
                const numAncestors = Math.pow(2, gen - 1); 
                const angleSlice = totalAngle / numAncestors; 
                const innerR = radii[gen - 1];
                const outerR = radii[gen];

                for (let i = 0; i < numAncestors; i++) {
                    const startAngle = i * angleSlice;
                    const endAngle = (i + 1) * angleSlice;
                    
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    const d = describeArcSector(centerX, centerY, innerR, outerR, startAngle, endAngle);
                    path.setAttribute("d", d);
                    path.classList.add("ancestor-cell");

                    const midAngle = startAngle + (angleSlice / 2);
                    const midRadius = innerR + (outerR - innerR) / 2;
                    
                    const labelKey = `${gen}_${i}`;
                    const textContent = labels[labelKey] || `Předek ${gen}-${i}`; 
                    const textEl = createTextLabel(textContent, gen, midAngle, midRadius);
                    
                    const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    g.classList.add(`gen-${gen}`, 'ancestor-group'); 
                    g.appendChild(path);
                    g.appendChild(textEl);
                    
                    g.addEventListener('click', function() {
                        showModal(labelKey); 
                    });
                    
                    svg.appendChild(g);
                }
            }
        })();
    </script>
</body>
</html>
    
     
