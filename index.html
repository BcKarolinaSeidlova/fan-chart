<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rodokmen rodiny</title>
    <style>
    /* Import fontu EB Garamond */
    @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;700&display=swap');
        
        body {
            font-family: 'EB Garamond', serif;
            
            background-color: #faebd7;
            color: #825930;
            margin: 0;
            overflow-y: auto; 
            overflow-x: hidden; 
        }

        .page-wrapper {
            width: 100%;
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            box-sizing: border-box; 
            text-align: center; 
        }

        .page-wrapper h1 {
            font-size: 32px;
            color: #5C4033; 
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .page-wrapper .instructions {
            font-size: 16px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .chart-container {
            width: 100%;
            max-width: 1200px;
        }

        svg {
            width: 100%;
            height: auto;
            font-size: 10px;
        }

        /* ----- Styly pro buňky rodokmenu ----- */
        .ancestor-cell {
            fill: #ffffff;
            stroke: #a8763e;
            stroke-width: 1;
            transition: fill 0.2s ease-in-out;
        }
        
        .ancestor-group {
             cursor: pointer;
        }

        .ancestor-group:hover .ancestor-cell {
            fill: #704d29;
        }

        .ancestor-text {
            fill: #5d4222;
            /* text-anchor se nyní nastavuje v JS */
            dominant-baseline: middle;
            pointer-events: none;
            font-size: 20px;
            font-weight: 500;
        }
   
        /* Barevné odlišení generací *//* https://www.w3schools.com/colors/colors_picker.asp */
        .gen-1 .ancestor-cell { fill: #f2e6d9; }
        .gen-2 .ancestor-cell { fill: #ebd9c6; }
        .gen-3 .ancestor-cell { fill: #e4cdb4; }
        .gen-4 .ancestor-cell { fill: #ddc0a1; }
        .gen-5 .ancestor-cell { fill: #d6b48f; }
        .gen-6 .ancestor-cell { fill: #cfa77d; }
        
        .ancestor-group:hover .ancestor-cell {
            fill: #0097a7;
        }
        .ancestor-group:hover .ancestor-text {
            fill: white;
            font-weight: bold;
        }
        
        /* ----- Styly pro modální okno (beze změny) ----- */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); 
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex; 
        }

        .modal-content {
            background-color: #f8f2ec;
            margin: auto;
            padding: 25px;
            border: 1px solid #956637;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal-close {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        .modal-content h2 {
            margin-top: 0;
            color: #5C4033; 
        }
        
        .modal-content p {
            line-height: 1.6;
            font-size: 16px;
            display: none; 
        }
        
        .modal-content p strong {
            display: inline-block;
            min-width: 80px; 
            color: #555;
        }
        
        .modal-buttons {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap; 
            gap: 10px; 
        }
        
        .modal-button {
            display: inline-block; 
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            color: #fff;
            background-color: #d6b48f; 
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .modal-button:hover {
            background-color: #cfa77d; 
        }
        
        .modal-button.disabled {
            background-color: #ccc;
            cursor: not-allowed;
            pointer-events: none;
        }

    </style>
</head>
<body>

    <div class="page-wrapper">
        <h1>Rodokmen rodiny</h1>
        <p class="instructions">Kliknutím na kterýkoli segment zobrazíte detailní informace o osobě.</p>

        <div class="chart-container">
            <svg id="fan-chart" viewBox="0 0 1000 520"></svg>
        </div>
    </div>

    <div id="person-modal" class="modal">
        <div class="modal-content">
            <span id="modal-close-btn" class="modal-close">&times;</span>
            
            <h2 id="modal-name">Jméno osoby</h2>
            
            <p id="modal-row-birth"><strong class.text-gray-500>Narození:</strong> <span id="modal-birth"></span></p>
            <p id="modal-row-marriage"><strong class.text-gray-500>Sňatek:</strong> <span id="modal-marriage"></span></p>
            <p id="modal-row-death"><strong class.text-gray-500>Úmrtí:</strong> <span id="modal-death"></span></p>
            <p id="modal-row-cause"><strong class.text-gray-500>Příčina úmrtí:</strong> <span id="modal-cause"></span></p>
            <p id="modal-row-occupation"><strong class.text-gray-500>Povolání:</strong> <span id="modal-occupation"></span></p>
            <p id="modal-row-note"><strong class.text-gray-500>Poznámka:</strong> <span id="modal-note"></span></p>

            <div class="modal-buttons">
                <a id="modal-link-birth" href="#" target="_blank" class="modal-button">Matrika narození</a>
                <a id="modal-link-marriage" href="#" target="_blank" class="modal-button">Matrika sňatků</a>
                <a id="modal-link-death" href="#" target="_blank" class="modal-button">Matrika úmrtí</a>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // --- Nastavení ---
            const generations = 6;
            const centerX = 500; 
            const centerY = 20;  
            const radii = [0, 80, 160, 240, 320, 400, 480]; 
            const svg = document.getElementById('fan-chart');

            // --- Vzorová DATA (beze změny) ---
            const ancestorData = {
                '1_0': {
                    name: 'Karel Lenz',
                    birth: '11. 1. 1917, Nová Ves 29',
                    death: '15.8.1991, Zlín', 
                    cause: null, 
                    occupation: 'vyučil se mlynářem',
                    marriage: null, 
                    linkBirth: 'https://example.com/matrika/narozeni/1',
                    linkMarriage: null, 
                    linkDeath: null     
                },
                '2_0': {
                    name: 'Václav Lenz',
                    birth: '13. 10. 1887, Střítež 19',
                    death: 'neznámé',
                    cause: null,
                    occupation: 'Zedník, dělník',
                    marriage: '28. 12. 1914, Dobrš',
                    linkBirth: 'https://digi.ceskearchivy.cz/11919/96/3478/1523/73/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3219/360/2001/896/67/0',
                    linkDeath: null 
                },
                '2_1': {
                    name: 'Josefa Nová',
                    birth: '4. 3. 1889, Osek 58 - Duchcov',
                    death: null,
                    cause: null,
                    occupation: null,
                    marriage: '28. 12. 1914, Dobrš',
                    linkBirth: 'http://vademecum.soalitomerice.cz/vademecum/permalink?xid=09ddd7cea03b9b8d:4e496e4e:12216bae987:-7f7e&scan=1312ea7ccc654648bba72a8125f87c3b',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3219/360/2001/896/67/0',
                    linkDeath: null
                },
                '3_0': {
                    name: 'Vojtěch Lenz',
                    birth: '15. 4. 1859, Milejovice 23',
                    death: 'neznámo',
                    cause: null,
                    occupation: 'Hajný v Čepřovicích (1906), Šafář v Jiřeticích (1921), ',
                    marriage: '28. 7. 1885, Kváskovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/3896/56/1235/1687/64/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/6286/34/1768/772/102/0',
                    linkDeath: '',
                    note: 'druhá manželka Marie Urbanová -; sňatek 1894 v Nihošovicích'
                },

'3_1': {
                    name: 'Anna Němcová',
                    birth: '6. 10. 1864, Miloňovice 14',
                    death: ' před 1894, neznámo kde',
                    cause: '',
                    occupation: '',
                    marriage: '28. 7. 1885, Kváskovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/4426/175/3080/1048/78/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/6286/34/1768/772/102/0',
                    linkDeath: ''
                },

'3_2': {
                    name: 'Václav Nový',
                    birth: '18. 8. 1844, Maleč 5',
                    death: '',
                    cause: '',
                    occupation: 'domkář',
                    marriage: '22. 2. 1880, Dobrš',
                    linkBirth: '',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3219/48/1936/1197/120/0',
                    linkDeath: ''
                },

'3_3': {
                    name: 'Marie Řáhová',
                    birth: '14. 3. 1846, Nová Ves 29',
                    death: '',
                    cause: '',
                    occupation: null,
                    marriage: '22. 2. 1880, Dobrš',
                    linkBirth: 'https://digi.ceskearchivy.cz/3211/48/1087/2811/67/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3219/48/1936/1197/120/0',
                    linkDeath: null
                },
        
                '4_0': {
                    name: 'Josef Lenz',
                    birth: '3. 3. 1824, Vlachovo Březí 115',
                    death: null,
                    cause: null,
                    occupation: 'volák a služebný v panském dvoře v Milejovicích',
                    marriage: '28. 2. 1859, Milejovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/8364/64/2857/612/120/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3902/65/1631/1079/51/0',
                    linkDeath: null
                },

                '4_1': {
                    name: 'Marie Švíková',
                    birth: '15. 12. 1832, Milejovice 27',
                    death: null,
                    cause: null,
                    occupation: null,
                    marriage: '28. 2. 1859, Milejovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/3895/44/3204/2585/66/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3902/65/1631/1079/51/0',
                    linkDeath: null
                },

                '4_2': {
                    name: 'Matěj Němec',
                    birth: '27. 7. 1827, Miloňovice 7',
                    death: '1. 4. 1877, Miloňovice 13',
                    cause: 'zapálení plic',
                    occupation: 'Podruh, obecní slouha',
                    marriage: '5. 10. 1852, Miloňovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/4425/6/1215/2468/85/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/4430/74/1036/1577/118/0',
                    linkDeath: 'https://digi.ceskearchivy.cz/4436/100/1003/2170/110/0'
                },

                '4_3': {
                    name: 'Anna Roučková',
                    birth: '3. 2. 1831, Vrbice 7',
                    death: null,
                    cause: null,
                    occupation: null,
                    marriage: '5. 10. 1852, Miloňovice',
                    linkBirth: 'https://digi.ceskearchivy.cz/8143/295/960/1627/125/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/4430/74/1036/1577/118/0',
                    linkDeath: null
                },

                '4_4': {
                    name: 'Václav Nový',
                    birth: '25. 9. 1806, Maleč 5',
                    death: '11. 3. 1873, Maleč 5',
                    cause: 'Sešlost věkem',
                    occupation: 'Domkář',
                    marriage: '12. 11. 1833, Zuklín',
                    linkBirth: 'http://www.portafontium.eu/iipimage/30068834/strasin-09_0120-n?x=237&y=212&w=244&h=85',
                    linkMarriage: 'http://www.portafontium.eu/iipimage/30068835/strasin-10_1320-o?x=43&y=393&w=285&h=99',
                    linkDeath: 'https://www.portafontium.eu/iipimage/30068849/strasin-24_1930-z?language=cs&x=95&y=175&w=233&h=514'
                 },

                 '4_5': {
                    name: 'Josefa Žílová',
                    birth: '1. 3. 1808, Zuklín 8',
                    death: '23. 4. 1873, Maleč 5',
                    cause: 'Tyfus (hlavnička)',
                    occupation: '',
                    marriage: '12. 11. 1833, Zuklín',
                    linkBirth: 'http://www.portafontium.eu/iipimage/30068834/strasin-09_3440-n?x=540&y=520&w=226&h=79',
                    linkMarriage: 'http://www.portafontium.eu/iipimage/30068835/strasin-10_1320-o?x=43&y=393&w=285&h=99',
                    linkDeath: 'https://www.portafontium.eu/iipimage/30068849/strasin-24_1940-z?language=cs&x=15&y=15&w=152&h=335'
                 },

                 '4_6': {
                    name: 'Josef Řáha',
                    birth: '31. 7. 1825, Nová Ves 29',
                    death: '',
                    cause: 'domkář',
                    occupation: '',
                    marriage: '28. 1. 1845, Nová Ves',
                    linkBirth: 'https://digi.ceskearchivy.cz/3211/9/975/854/80/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3218/15/1035/1159/82/0',
                    linkDeath: ''
                },

                 '4_7': {
                    name: 'Josefa Dolíšková',
                    birth: '26. 2. 1816, Víska 1',
                    death: '30. 1. 1882, Nová Ves 29',
                    cause: 'Sešlost věkem',
                    occupation: '',
                    marriage: '28. 1. 1845, Nová Ves',
                    linkBirth: 'https://digi.ceskearchivy.cz/3206/148/1139/2956/109/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/3218/15/1035/1159/82/0',
                    linkDeath: 'https://digi.ceskearchivy.cz/3223/222/1307/2688/69/0'
                 },
                    
                '5_0': {
                    name: 'Ignác Lenz',
                    birth: '18. 7. 1776, Vlachovo Březí 90',
                    death: '1. 1. 1837, Vlachovo Březí 115',
                    cause: 'souchotiny',
                    occupation: 'soukenický tovaryš',
                    marriage: '15. 11. 1814, Vlachovo Březí',
                    linkBirth: 'https://digi.ceskearchivy.cz/8358/68/2596/554/115/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/8363/7/1253/1958/94/0',
                    linkDeath: 'https://digi.ceskearchivy.cz/8374/78/1291/1238/109/0'
                },

                 '5_1': {
                    name: 'Marie Magdalena Formánková',
                    birth: '12. 2. 1784, Vlachovo Březí 144',
                    death: '8. 11. 1832, Vlachovo Březí 115',
                    cause: 'cholera',
                    occupation: '',
                    marriage: '15. 11. 1814, Vlachovo Březí',
                    linkBirth: 'https://digi.ceskearchivy.cz/8358/116/2802/1515/84/0',
                    linkMarriage: 'https://digi.ceskearchivy.cz/8363/7/1253/1958/94/0',
                    linkDeath: 'https://digi.ceskearchivy.cz/8374/56/1586/2653/69/0'
                },
                     
                '6_0': {
                    name: 'Matěj Lenz',
                    birth: null,
                    death: null,
                    cause: null,
                    occupation: null,
                    marriage: null,
                    linkBirth: null,
                    linkMarriage: null,
                    linkDeath: null
                },

            
            };
            
            // Popisky (jména) pro buňky
            const labels = {};
            for (const key in ancestorData) {
                if(ancestorData[key]) labels[key] = ancestorData[key].name;
            }
            
            // --- Reference na modální okno a jeho prvky (beze změny) ---
            const modal = document.getElementById('person-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalName = document.getElementById('modal-name');
            
            const modalBirth = document.getElementById('modal-birth');
            const modalMarriage = document.getElementById('modal-marriage');
            const modalDeath = document.getElementById('modal-death');
            const modalCause = document.getElementById('modal-cause');
            const modalOccupation = document.getElementById('modal-occupation');
            const modalNote = document.getElementById('modal-note');
            
            const modalLinkBirth = document.getElementById('modal-link-birth');
            const modalLinkMarriage = document.getElementById('modal-link-marriage');
            const modalLinkDeath = document.getElementById('modal-link-death');

            // --- Formátování data do češtiny (beze změny) ---
            const czechMonths = [
                'ledna', 'února', 'března', 'dubna', 'května', 'června',
                'července', 'srpna', 'září', 'října', 'listopadu', 'prosince'
            ];

            function formatCzechDate(dateString) {
                if (!dateString) {
                    return null;
                }
                const match = dateString.match(/^(\d{1,2})\. *(\d{1,2})\. *(\d{4})(.*)$/);

                if (match) {
                    const day = match[1];
                    const monthIndex = parseInt(match[2], 10) - 1; 
                    const year = match[3];
                    const rest = match[4]; 

                    if (monthIndex >= 0 && monthIndex < 12) {
                        const monthName = czechMonths[monthIndex];
                        return `${day}. ${monthName} ${year}${rest}`;
                    }
                }
                return dateString;
            }

            // --- Funkce modálního okna (beze změny) ---
            function updateModalRow(spanElement, value) {
                const rowElement = spanElement.parentElement; 
                if (value) {
                    spanElement.textContent = value;
                    rowElement.style.display = 'block'; 
                } else {
                    spanElement.textContent = ''; 
                    rowElement.style.display = 'none';  
                }
            }

            function closeModal() {
                modal.classList.remove('active');
            }
            modalCloseBtn.onclick = closeModal;
            modal.onclick = function(event) {
                if (event.target == modal) {
                    closeModal();
                }
            }
            
            function showModal(key) {
                const data = ancestorData[key];
                
                if (data) {
                    modalName.textContent = data.name;
                    updateModalRow(modalBirth, formatCzechDate(data.birth));
                    updateModalRow(modalMarriage, formatCzechDate(data.marriage));
                    updateModalRow(modalDeath, formatCzechDate(data.death));
                    updateModalRow(modalCause, data.cause);
                    updateModalRow(modalOccupation, data.occupation);
                    updateModalRow(modalNote, data.note); 
                    
                    setButtonLink(modalLinkBirth, data.linkBirth);
                    setButtonLink(modalLinkMarriage, data.linkMarriage);
                    setButtonLink(modalLinkDeath, data.linkDeath);

                } else {
                    modalName.textContent = `Předek (Gen ${key.split('_')[0]}, Index ${key.split('_')[1]})`;
                    updateModalRow(modalBirth, null);
                    updateModalRow(modalMarriage, null);
                    updateModalRow(modalDeath, null);
                    updateModalRow(modalCause, null);
                    updateModalRow(modalOccupation, null);
                    updateModalRow(modalNote, null);
                    
                    setButtonLink(modalLinkBirth, null);
                    setButtonLink(modalLinkMarriage, null);
                    setButtonLink(modalLinkDeath, null);
                }
                
                modal.classList.add('active'); 
            }
            
            function setButtonLink(button, href) {
                if (href && href !== '#') {
                    button.href = href;
                    button.classList.remove('disabled');
                    button.removeAttribute('aria-disabled');
                    button.style.display = 'inline-block'; 
                } else {
                    button.href = '#'; 
                    button.classList.add('disabled');
                    button.setAttribute('aria-disabled', 'true');
                    button.style.display = 'none'; 
                }
            }

            // --- Helper funkce (beze změny) ---
            function polarToCartesian(cx, cy, radius, angleInDegrees) {
                const angleInRadians = (angleInDegrees) * Math.PI / 180.0;
                return {
                    x: cx + (radius * Math.cos(angleInRadians)),
                    y: cy + (radius * Math.sin(angleInRadians))
                };
            }

            function describeArcSector(x, y, innerRadius, outerRadius, startAngle, endAngle) {
                const startOuter = polarToCartesian(x, y, outerRadius, endAngle);
                const endOuter = polarToCartesian(x, y, outerRadius, startAngle);
                const startInner = polarToCartesian(x, y, innerRadius, endAngle);
                const endInner = polarToCartesian(x, y, innerRadius, startAngle);
                const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
                const d = [
                    "M", startOuter.x, startOuter.y, 
                    "A", outerRadius, outerRadius, 0, largeArcFlag, 0, endOuter.x, endOuter.y,
                    "L", endInner.x, endInner.y,     
                    "A", innerRadius, innerRadius, 0, largeArcFlag, 1, startInner.x, startInner.y,
                    "Z"
                ].join(" ");
                return d;
            }

            // --- AKTUALIZOVANÁ FUNKCE PRO TEXT s podporou zalamování ---
            function createTextLabel(text, gen, midAngle, midRadius) {
                const textPos = polarToCartesian(centerX, centerY, midRadius, midAngle); 
                
                const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textEl.setAttribute("x", textPos.x);
                textEl.setAttribute("y", textPos.y);

                // Otáčení textu podél tečny oblouku
                let textAngle = midAngle - 90; 
                
                // Pro první generaci (uprostřed) necháme text horizontální
                if (gen === 1) {
                    textAngle = 0;
                }
                
                textEl.setAttribute("transform", `rotate(${textAngle}, ${textPos.x}, ${textPos.y})`);
                textEl.style.textAnchor = "middle"; 

                textEl.classList.add("ancestor-text");
                
                // Zmenšení písma pro vnější generace (zachováno dle původního kódu)
                if (gen > 4) textEl.style.fontSize = "15px";
                if (gen > 5) textEl.style.fontSize = "12px";
                
                // --- ZALAMOVÁNÍ TEXTU (NOVÁ LOGIKA) ---
                const parts = text.split(/\s+/); // Rozdělení podle mezer
                
                if (parts.length > 1) {
                    // První řádek (Jméno/Jména)
                    const line1 = parts.slice(0, -1).join(' '); 
                    // Druhý řádek (Příjmení)
                    const line2 = parts[parts.length - 1];      
                    
                    const tspan1 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspan1.textContent = line1;
                    // Posun nahoru (relativně k aktuální velikosti fontu)
                    tspan1.setAttribute('dy', '-0.4em');
                    tspan1.setAttribute('x', textPos.x);
                    textEl.appendChild(tspan1);

                    const tspan2 = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspan2.textContent = line2;
                    // Posun dolů o řádek 
                    tspan2.setAttribute('x', textPos.x); 
                    tspan2.setAttribute('dy', '1em'); 
                    textEl.appendChild(tspan2);

                } else {
                    // Pokud je text jen jedno slovo, vložte ho normálně
                    textEl.textContent = text;
                }
                // --- KONEC ZALAMOVÁNÍ TEXTU ---

                return textEl;
            }

            // --- Hlavní smyčka pro generování (beze změny) ---
            const totalAngle = 180; 
            for (let gen = 1; gen <= generations; gen++) {
                const numAncestors = Math.pow(2, gen - 1); 
                const angleSlice = totalAngle / numAncestors; 
                const innerR = radii[gen - 1];
                const outerR = radii[gen];

                for (let i = 0; i < numAncestors; i++) {
                    const startAngle = i * angleSlice;
                    const endAngle = (i + 1) * angleSlice;
                    
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    const d = describeArcSector(centerX, centerY, innerR, outerR, startAngle, endAngle);
                    path.setAttribute("d", d);
                    path.classList.add("ancestor-cell");

                    const midAngle = startAngle + (angleSlice / 2);
                    const midRadius = innerR + (outerR - innerR) / 2;
                    
                    const labelKey = `${gen}_${i}`;
                    const textContent = labels[labelKey] || `Předek ${gen}-${i}`; 
                    const textEl = createTextLabel(textContent, gen, midAngle, midRadius);
                    
                    const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    g.classList.add(`gen-${gen}`, 'ancestor-group'); 
                    g.appendChild(path);
                    g.appendChild(textEl);
                    
                    g.addEventListener('click', function() {
                        showModal(labelKey); 
                    });
                    
                    svg.appendChild(g);
                }
            }
        })();
    </script>
</body>
</html>
    
     
